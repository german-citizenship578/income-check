<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Do you earn enough for German citizenship?</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; background:#f6f7fb; margin:0; }
    .wrap { max-width: 720px; margin: 32px auto; padding: 0 16px; }
    .card { background:white; border-radius: 14px; padding: 22px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
    h1 { font-size: 22px; margin: 0 0 18px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px 16px; }
    label { font-size: 13px; color:#333; display:block; margin-bottom: 6px; }
    input, select {
      width: 100%; padding: 10px 11px; border: 1px solid #d7dbe7;
      border-radius: 10px; font-size: 14px; background: #fff;
    }
    .full { grid-column: 1 / -1; }
    .results { margin-top: 18px; padding: 14px; background:#f3f6ff; border-radius: 10px; }
    .status-line { display:flex; align-items:center; gap:8px; margin-bottom:4px; }
    .status-ok { color:#0a7a2f; font-weight:600; }
    .status-bad { color:#b00020; font-weight:600; }
    .icon { font-size:18px; }
    @media (max-width: 560px) { .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Do you earn enough for German citizenship?</h1>

      <div class="grid">
        <div class="full">
          <label for="incomeSelf">Your net income per month</label>
          <input id="incomeSelf" type="number" min="0" step="0.01" value="0">
        </div>

        <div class="full">
          <label for="married">Are you married?</label>
          <select id="married">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>

        <div class="full" id="spouseGroup" style="display:none;">
          <label for="incomeSpouse">Your spouse's net income per month</label>
          <input id="incomeSpouse" type="number" min="0" step="0.01" value="0">
        </div>

        <div class="full">
          <label for="rent">Your rent including heat per month</label>
          <input id="rent" type="number" min="0" step="0.01" value="0">
        </div>

        <div class="full">
          <label for="c05">How many children from age 0-5 live in your household?</label>
          <input id="c05" type="number" min="0" step="1" value="0">
        </div>

        <div class="full">
          <label for="c613">How many children from age 6-13 live in your household?</label>
          <input id="c613" type="number" min="0" step="1" value="0">
        </div>

        <div class="full">
          <label for="c1417">How many children from age 14-17 live in your household?</label>
          <input id="c1417" type="number" min="0" step="1" value="0">
        </div>

        <div class="full">
          <label for="adultKids">How many adult children live in your household?</label>
          <input id="adultKids" type="number" min="0" step="1" value="0">
        </div>
      </div>

      <div class="results" id="results"></div>
    </div>
  </div>

<script>
  function num(id) {
    const v = document.getElementById(id).value;
    const n = Number(v);
    return Number.isFinite(n) ? n : 0;
  }

  function formatEuroPlain(n) {
    return n.toFixed(2);
  }

  function calc() {
    const married = document.getElementById('married').value === 'yes';

    const spouseGroup = document.getElementById('spouseGroup');
    spouseGroup.style.display = married ? '' : 'none';

    const incomeSelf = num('incomeSelf');
    const incomeSpouse = married ? num('incomeSpouse') : 0;
    const rent = num('rent');

    const c05 = Math.max(0, Math.floor(num('c05')));
    const c613 = Math.max(0, Math.floor(num('c613')));
    const c1417 = Math.max(0, Math.floor(num('c1417')));
    const adultKids = Math.max(0, Math.floor(num('adultKids')));

    const adjustedIncome = incomeSelf + incomeSpouse - rent;

    const threshold =
      563 +
      (married ? 449 : 0) +
      357 * c05 +
      390 * c613 +
      471 * c1417 +
      451 * adultKids;

    const ok = adjustedIncome >= threshold;
    const diffRaw = adjustedIncome - threshold;
    const diffAbs = Math.abs(diffRaw);

    let line2;
    if (Math.abs(diffRaw) < 0.005) {
      line2 = "Income is exactly at the threshold.";
    } else if (diffRaw > 0) {
      line2 = "Income is " + formatEuroPlain(diffAbs) + " Euro above the threshold.";
    } else {
      line2 = "Income is " + formatEuroPlain(diffAbs) + " Euro below the threshold.";
    }

    const statusText = ok ? "You can get German citizenship" : "You can not get German citizenship";
    const icon = ok ? "✓" : "✗";
    const statusClass = ok ? "status-ok" : "status-bad";

    document.getElementById('results').innerHTML = `
      <div class="status-line ${statusClass}">
        <span class="icon">${icon}</span>
        <span>${statusText}</span>
      </div>
      <div>${line2}</div>
    `;
  }

  document.querySelectorAll('input, select').forEach(el => {
    el.addEventListener('input', calc);
    el.addEventListener('change', calc);
  });

  calc();
</script>
</body>
</html>

