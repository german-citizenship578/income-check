<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Household Income Check</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; background:#f6f7fb; margin:0; }
    .wrap { max-width: 720px; margin: 32px auto; padding: 0 16px; }
    .card { background:white; border-radius: 14px; padding: 22px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
    h1 { font-size: 22px; margin: 0 0 10px; }
    p.sub { margin: 0 0 18px; color:#555; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px 16px; }
    label { font-size: 13px; color:#333; display:block; margin-bottom: 6px; }
    input, select {
      width: 100%; padding: 10px 11px; border: 1px solid #d7dbe7;
      border-radius: 10px; font-size: 14px; background: #fff;
    }
    .full { grid-column: 1 / -1; }
    .results { margin-top: 18px; padding: 14px; background:#f3f6ff; border-radius: 10px; }
    .row { display:flex; justify-content: space-between; gap: 12px; padding: 4px 0; }
    .ok { color: #0a7a2f; font-weight: 600; }
    .no { color: #b00020; font-weight: 600; }
    .small { font-size: 12px; color:#666; margin-top: 10px; }
    @media (max-width: 560px) { .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Household Income Requirement Calculator</h1>
      <p class="sub">Adds net incomes, subtracts rent incl. heating, and checks against the required minimum.</p>

      <div class="grid">
        <div>
          <label for="incomeSelf">Your net income (monthly)</label>
          <input id="incomeSelf" type="number" min="0" step="0.01" value="0">
        </div>
        <div>
          <label for="incomePartner">Partner net income (monthly)</label>
          <input id="incomePartner" type="number" min="0" step="0.01" value="0">
        </div>

        <div class="full">
          <label for="rent">Rent incl. heating (monthly)</label>
          <input id="rent" type="number" min="0" step="0.01" value="0">
        </div>

        <div class="full">
          <label for="withPartner">Living with partner/spouse in same household?</label>
          <select id="withPartner">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>

        <div>
          <label for="c05">Children age 0-5 (count)</label>
          <input id="c05" type="number" min="0" step="1" value="0">
        </div>
        <div>
          <label for="c613">Children age 6-13 (count)</label>
          <input id="c613" type="number" min="0" step="1" value="0">
        </div>
        <div>
          <label for="c1417">Children age 14-17 (count)</label>
          <input id="c1417" type="number" min="0" step="1" value="0">
        </div>
        <div>
          <label for="adultKids">Adult children in household (count)</label>
          <input id="adultKids" type="number" min="0" step="1" value="0">
        </div>
      </div>

      <div class="results" id="results"></div>
      <div class="small">
        Rule implemented as: required = 563 + (partner? 449 : 0) + 357*(0-5) + 390*(6-13) + 471*(14-17) + 451*(adult children).
      </div>
    </div>
  </div>

<script>
  const eur = (n) => new Intl.NumberFormat('de-DE', { style:'currency', currency:'EUR' }).format(n);

  function val(id) {
    const v = document.getElementById(id).value;
    const n = Number(v);
    return Number.isFinite(n) ? n : 0;
  }

  function calc() {
    const incomeSelf = val('incomeSelf');
    const incomePartner = val('incomePartner');
    const rent = val('rent');

    const withPartner = document.getElementById('withPartner').value === 'yes';

    const c05 = Math.max(0, Math.floor(val('c05')));
    const c613 = Math.max(0, Math.floor(val('c613')));
    const c1417 = Math.max(0, Math.floor(val('c1417')));
    const adultKids = Math.max(0, Math.floor(val('adultKids')));

    const remaining = incomeSelf + incomePartner - rent;

    const required =
      563 +
      (withPartner ? 449 : 0) +
      357 * c05 +
      390 * c613 +
      471 * c1417 +
      451 * adultKids;

    const shortfall = Math.max(required - remaining, 0);
    const ok = remaining > required;

    document.getElementById('results').innerHTML = `
      <div class="row"><span>Remaining after rent</span><strong>${eur(remaining)}</strong></div>
      <div class="row"><span>Required minimum</span><strong>${eur(required)}</strong></div>
      <div class="row"><span>Status</span>
        <strong class="${ok ? 'ok' : 'no'}">
          ${ok ? 'Meets requirement' : 'Does not meet requirement'}
        </strong>
      </div>
      <div class="row"><span>Shortfall</span><strong>${eur(shortfall)}</strong></div>
    `;
  }

  document.querySelectorAll('input, select').forEach(el => {
    el.addEventListener('input', calc);
    el.addEventListener('change', calc);
  });

  calc();
</script>
</body>
</html>
